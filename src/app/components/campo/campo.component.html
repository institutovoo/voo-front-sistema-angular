<div class="campo-wrapper" [class.campo-wrapper--erro]="temErro">
  <label class="campo__rotulo" *ngIf="rotulo">
    {{ rotulo }}
    <span *ngIf="obrigatorio" class="campo__obrigatorio" aria-hidden="true">*</span>
  </label>
  <div
    class="campo"
    [class.campo--com-icone-esquerda]="icone"
    [class.campo--com-icone-direita]="mostrarAlternarSenha && tipo === 'password'"
    [class.campo--erro]="temErro"
  >
    <input
      *ngIf="tipo !== 'select'"
      class="campo__controle"
      [type]="tipoCampo"
      [placeholder]="placeholder"
      [value]="valor()"
      [disabled]="desabilitado()"
      [attr.maxlength]="maxlength"
      (input)="aoDigitar($event)"
      (blur)="aoPerderFoco()"
    />

    <div
      *ngIf="tipo === 'select'"
      class="campo__controle campo__controle--select"
      [class.campo__controle--vazio]="!valor()"
      [class.campo__controle--aberto]="dropdownAberto()"
      (click)="alternarDropdown()"
    >
      <span class="campo__valor-selecionado">
        {{ valor() || placeholder }}
      </span>
      
      <div class="campo__dropdown" *ngIf="dropdownAberto()">
        <div 
          *ngFor="let opcao of opcoes" 
          class="campo__opcao"
          [class.campo__opcao--selecionada]="valor() === opcao"
          (click)="selecionarOpcao(opcao); $event.stopPropagation()"
        >
          {{ opcao }}
        </div>
      </div>
    </div>

    <!-- Ícone esquerda -->
    <span class="campo__icone campo__icone--esquerda" *ngIf="icone" aria-hidden="true">
      <!-- Email -->
      <svg
        *ngIf="icone === 'email'"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M4 4h16v16H4z"></path>
        <path d="M22 6l-10 7L2 6"></path>
      </svg>

      <!-- Senha -->
      <svg
        *ngIf="icone === 'senha'"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
      </svg>

      <!-- Usuário -->
      <svg
        *ngIf="icone === 'usuario'"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M20 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M4 21v-2a4 4 0 0 1 3-3.87"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>

      <!-- Telefone -->
      <svg
        *ngIf="icone === 'telefone'"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M22 16.92v3a2 2 0 0 1-2.18 2A19.79 19.79 0 0 1 3.08 5.26 2 2 0 0 1 5 3h3a2 2 0 0 1 2 1.72c.12.9.35 1.77.68 2.58a2 2 0 0 1-.45 2.11L9 10a16 16 0 0 0 5 5l.59-.59a2 2 0 0 1 2.11-.45c.81.33 1.68.56 2.58.68A2 2 0 0 1 22 16.92z"
        ></path>
      </svg>

      <!-- Busca -->
      <svg
        *ngIf="icone === 'busca'"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="11" cy="11" r="8"></circle>
        <path d="M21 21l-4.35-4.35"></path>
      </svg>

      <svg
        *ngIf="icone === 'documento'"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M7 3h10a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" />
        <path d="M9 7h6" />
        <path d="M9 11h6" />
        <path d="M9 15h4" />
      </svg>
    </span>

    <!-- Botão mostrar/ocultar senha -->
    <button
      type="button"
      class="campo__icone campo__icone--direita"
      *ngIf="mostrarAlternarSenha && tipo === 'password'"
      aria-label="Mostrar ou ocultar senha"
      (click)="alternarSenha()"
    >
      <!-- Olho aberto -->
      <svg
        *ngIf="!senhaVisivel()"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z" />
        <circle cx="12" cy="12" r="3" />
      </svg>
      <!-- Olho fechado -->
      <svg
        *ngIf="senhaVisivel()"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
        />
        <line x1="1" y1="1" x2="23" y2="23" />
      </svg>
    </button>
  </div>

  <!-- Mensagem de erro -->
  <span class="campo__erro-msg" *ngIf="temErro">
    {{ mensagemDeErro }}
  </span>
</div>
