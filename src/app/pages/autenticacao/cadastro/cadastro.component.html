<div class="autenticacao">
  <div class="autenticacao__esquerda">
    <div class="destaque">
      <div class="destaque__icone">
        <svg
          width="32"
          height="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
      </div>

      <h2 class="destaque__titulo">Comece sua jornada de aprendizado</h2>
      <p class="destaque__descricao">
        Junte-se a milhares de alunos que estão transformando suas carreiras através da educação
        online.
      </p>

      <ul class="destaque__beneficios">
        <li class="destaque__beneficio">
          <span class="destaque__check">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="20 6 9 17 4 12" />
            </svg>
          </span>
          <span>Acesso ilimitado a todos os cursos</span>
        </li>
        <li class="destaque__beneficio">
          <span class="destaque__check">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="20 6 9 17 4 12" />
            </svg>
          </span>
          <span>Certificados reconhecidos</span>
        </li>
        <li class="destaque__beneficio">
          <span class="destaque__check">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="20 6 9 17 4 12" />
            </svg>
          </span>
          <span>Suporte especializado 24/7</span>
        </li>
      </ul>
    </div>
  </div>

  <div class="autenticacao__direita">
    <div class="autenticacao__formulario">
      <app-logo tema="light"></app-logo>

      <h1 class="titulo">Criar conta</h1>
      <p class="subtitulo">Preencha os dados abaixo para começar</p>

      <div *ngIf="erro" class="mensagem-erro">{{ erro }}</div>
      <div *ngIf="sucesso" class="mensagem-sucesso">{{ sucesso }}</div>

      <form class="formulario" [formGroup]="formulario" (ngSubmit)="enviar()">
        <div class="tipo-conta">
          <span class="tipo-conta__rotulo">Eu sou:</span>
          <div class="tipo-conta__opcoes">
            <label
              class="tipo-conta__opcao"
              [class.tipo-conta__opcao--ativo]="formulario.get('tipoConta')?.value === 'Aluno'"
            >
              <input type="radio" formControlName="tipoConta" value="Aluno" />
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              Aluno
            </label>
            <label
              class="tipo-conta__opcao"
              [class.tipo-conta__opcao--ativo]="formulario.get('tipoConta')?.value === 'Instrutor'"
            >
              <input type="radio" formControlName="tipoConta" value="Instrutor" />
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              Instrutor
            </label>
            <label
              class="tipo-conta__opcao"
              [class.tipo-conta__opcao--ativo]="formulario.get('tipoConta')?.value === 'Pessoa jurídica conveniados'"
            >
              <input type="radio" formControlName="tipoConta" value="Pessoa jurídica conveniados" />
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
              </svg>
              PJ Conveniada
            </label>
            <label
              class="tipo-conta__opcao"
              [class.tipo-conta__opcao--ativo]="formulario.get('tipoConta')?.value === 'Instituição parceira (pessoa juridica)'"
            >
              <input type="radio" formControlName="tipoConta" value="Instituição parceira (pessoa juridica)" />
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
              Inst. Parceira
            </label>
          </div>
        </div>

        <app-campo
          *ngIf="formulario.get('tipoConta')?.value === 'Instrutor'"
          rotulo="Tipo de Instrutor"
          tipo="select"
          placeholder="PF ou PJ?"
          icone="usuario"
          formControlName="tipoPessoaInstrutor"
          [obrigatorio]="true"
          [opcoes]="opcoesTipoPessoa"
        ></app-campo>

        <app-campo
          [rotulo]="rotuloNome"
          tipo="text"
          [placeholder]="placeholderNome"
          icone="usuario"
          formControlName="nome"
          [obrigatorio]="true"
        ></app-campo>

        <app-campo
          rotulo="Nome Social"
          tipo="text"
          placeholder="Como gostaria de ser chamado(a)"
          icone="usuario"
          formControlName="nomeSocial"
        ></app-campo>

        <app-campo
          *ngIf="formulario.get('tipoConta')?.value === 'Aluno' || (formulario.get('tipoConta')?.value === 'Instrutor' && formulario.get('tipoPessoaInstrutor')?.value === 'Pessoa Física')"
          rotulo="Nome da Mãe"
          tipo="text"
          placeholder="Nome completo da mãe"
          icone="usuario"
          formControlName="nomeMae"
          [obrigatorio]="true"
        ></app-campo>

        <div class="formulario__grid-endereco">
          <div *ngIf="buscandoCep" class="buscando-cep">Buscando...</div>
          <app-campo
            class="campo-cep"
            rotulo="CEP"
            tipo="text"
            placeholder="00000-000"
            icone="busca"
            formControlName="cep"
            [obrigatorio]="true"
            [maxlength]="9"
          ></app-campo>

          <ng-container *ngIf="enderecoCarregado">
            <app-campo
              class="campo-logradouro"
              rotulo="Logradouro"
              tipo="text"
              placeholder="Rua, Avenida, etc"
              formControlName="logradouro"
              [obrigatorio]="true"
            ></app-campo>

            <app-campo
              class="campo-numero"
              rotulo="Nº"
              tipo="text"
              placeholder="123"
              formControlName="numero"
              [obrigatorio]="true"
            ></app-campo>

            <app-campo
              class="campo-complemento"
              rotulo="Complemento"
              tipo="text"
              placeholder="Apto, Bloco, etc"
              formControlName="complemento"
            ></app-campo>

            <app-campo
              class="campo-bairro"
              rotulo="Bairro"
              tipo="text"
              placeholder="Seu bairro"
              formControlName="bairro"
              [obrigatorio]="true"
            ></app-campo>

            <app-campo
              class="campo-cidade"
              rotulo="Cidade"
              tipo="text"
              placeholder="Sua cidade"
              formControlName="cidade"
              [obrigatorio]="true"
            ></app-campo>

            <app-campo
              class="campo-estado"
              rotulo="Estado (UF)"
              tipo="select"
              placeholder="Selecione o estado"
              formControlName="estado"
              [obrigatorio]="true"
              [opcoes]="[
                'AC', 'AL', 'AP', 'AM', 'BA', 'CE', 'DF', 'ES', 'GO', 'MA', 
                'MT', 'MS', 'MG', 'PA', 'PB', 'PR', 'PE', 'PI', 'RJ', 'RN', 
                'RS', 'RO', 'RR', 'SC', 'SP', 'SE', 'TO'
              ]"
            ></app-campo>
          </ng-container>
        </div>

        <app-campo
          *ngIf="formulario.get('tipoConta')?.value === 'Aluno' || formulario.get('tipoConta')?.value === 'Instrutor'"
          rotulo="Última Formação"
          tipo="select"
          placeholder="Selecione sua formação"
          icone="documento"
          formControlName="ultimaFormacao"
          [obrigatorio]="true"
          [opcoes]="opcoesFormacao"
        ></app-campo>

        <app-campo
          *ngIf="formulario.get('tipoConta')?.value === 'Aluno' || formulario.get('tipoConta')?.value === 'Instrutor'"
          rotulo="Status da Formação"
          tipo="select"
          placeholder="Selecione o status"
          icone="documento"
          formControlName="statusFormacao"
          [obrigatorio]="true"
          [opcoes]="opcoesStatusFormacao"
        ></app-campo>

        <app-campo
          [rotulo]="(formulario.get('tipoConta')?.value === 'Pessoa jurídica conveniados' || formulario.get('tipoConta')?.value === 'Instituição parceira (pessoa juridica)' || (formulario.get('tipoConta')?.value === 'Instrutor' && formulario.get('tipoPessoaInstrutor')?.value === 'Pessoa Jurídica')) ? 'CNPJ' : 'CPF'"
          tipo="text"
          placeholder="Digite apenas números"
          icone="documento"
          formControlName="documento"
          [maxlength]="(formulario.get('tipoConta')?.value === 'Pessoa jurídica conveniados' || formulario.get('tipoConta')?.value === 'Instituição parceira (pessoa juridica)' || (formulario.get('tipoConta')?.value === 'Instrutor' && formulario.get('tipoPessoaInstrutor')?.value === 'Pessoa Jurídica')) ? 18 : 14"
          [obrigatorio]="true"
        ></app-campo>

        <app-campo
          rotulo="E-mail"
          tipo="email"
          placeholder="seu@email.com"
          icone="email"
          formControlName="email"
          [obrigatorio]="true"
        ></app-campo>

        <app-campo
          rotulo="Telefone"
          tipo="tel"
          placeholder="(11) 99999-9999"
          icone="telefone"
          formControlName="telefone"
          [maxlength]="15"
          [obrigatorio]="true"
        ></app-campo>

        <app-campo
          rotulo="Senha"
          tipo="password"
          placeholder="••••••••"
          icone="senha"
          [mostrarAlternarSenha]="true"
          formControlName="senha"
          [obrigatorio]="true"
        ></app-campo>

        <app-campo
          rotulo="Confirmar senha"
          tipo="password"
          placeholder="••••••••"
          icone="senha"
          [mostrarAlternarSenha]="true"
          formControlName="confirmarSenha"
          [obrigatorio]="true"
        ></app-campo>

        <div class="formulario__linha">
          <label class="caixa">
            <input type="checkbox" formControlName="termos" />
            <span>
              Li e aceito os
              <a class="atalho" (click)="abrirTermos(); $event.preventDefault()">Termos de Uso</a>
              e a
              <a class="atalho" (click)="abrirPrivacidade(); $event.preventDefault()"
                >Política de Privacidade</a
              >
            </span>
          </label>
        </div>

        <app-botao
          tipo="submit"
          variante="primario"
          [larguraTotal]="true"
          [carregando]="enviando"
          [desabilitado]="enviando"
        >
          {{ enviando ? 'Cadastrando...' : 'Criar minha conta' }}
        </app-botao>
      </form>

      <div class="rodape">
        <span>Já tem uma conta?</span>
        <a class="atalho" routerLink="/login">Fazer login</a>
      </div>
    </div>
  </div>
</div>

@if (mostrarTermos) {
<app-termos (fechou)="fecharTermos()"></app-termos>
} @if (mostrarPrivacidade) {
<app-privacidade (fechou)="fecharPrivacidade()"></app-privacidade>
}
