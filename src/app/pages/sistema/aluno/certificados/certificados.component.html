<app-sistema-layout [usuario]="usuarioExibicao" tipoUsuario="aluno" conteudoMaxWidth="1400px">
  <!-- Header da página -->
  <div class="page-header">
    <div class="page-header__info">
      <h1 class="page-header__titulo">Meus certificados</h1>
      <p class="page-header__subtitulo">Gerencie e compartilhe suas conquistas de aprendizado</p>
    </div>
    <div class="page-header__acoes">
      <button class="btn btn--primary">
        <app-header-icone nome="download" [tamanho]="18"></app-header-icone>
        Baixar todos
      </button>
    </div>
  </div>

  <!-- Métricas -->
  <section class="metricas">
    <div class="metricas__grid">
      <app-card-kpi *ngFor="let metrica of metricas" [estatistica]="metrica"></app-card-kpi>
    </div>
  </section>

  <!-- Filtros -->
  <app-filtros-barra
    [tabs]="categorias"
    [tabAtiva]="categoriaFiltro"
    [termoBusca]="termoBusca"
    placeholderBusca="Buscar certificado..."
    [ordenacao]="ordenacao"
    [opcoesOrdenacao]="opcoesOrdenacao"
    [visualizacao]="visualizacao"
    [mostrarVisualizacao]="true"
    [mostrarLimpar]="temFiltrosAtivos"
    tabEstilo="dot"
    (tabChange)="onTabChange($event)"
    (buscaChange)="onBuscaChange($event)"
    (ordenacaoChange)="onOrdenacaoChange($event)"
    (visualizacaoChange)="setVisualizacao($event)"
    (limparFiltros)="limparFiltros()"
  ></app-filtros-barra>

  <!-- Resultados -->
  <section class="resultados">
    <div class="resultados__header">
      <span class="resultados__count">
        {{ certificadosFiltrados.length }}
        {{
          certificadosFiltrados.length === 1 ? 'certificado encontrado' : 'certificados encontrados'
        }}
      </span>
    </div>

    <!-- Grid/Lista de Certificados -->
    <div class="certificados-grid" [class.certificados-grid--lista]="visualizacao === 'lista'">
      <app-certificado-card
        *ngFor="let cert of certificadosFiltrados"
        [certificado]="cert"
        [visualizacao]="visualizacao"
        (visualizar)="onVisualizarCertificado($event)"
        (baixar)="onBaixarCertificado($event)"
        (compartilhar)="onCompartilharCertificado($event)"
      ></app-certificado-card>
    </div>

    <!-- Estado vazio -->
    <div class="estado-vazio" *ngIf="certificadosFiltrados.length === 0">
      <div class="estado-vazio__icone">
        <app-header-icone nome="certificados" [tamanho]="48" cor="#cbd5e1"></app-header-icone>
      </div>
      <h3 class="estado-vazio__titulo">Nenhum certificado encontrado</h3>
      <p class="estado-vazio__texto">
        Tente ajustar os filtros ou conclua novos cursos para obter certificados.
      </p>
      <button class="btn btn--primary" routerLink="/aluno/loja">
        <app-header-icone nome="loja" [tamanho]="18"></app-header-icone>
        Explorar cursos
      </button>
    </div>
  </section>
</app-sistema-layout>
