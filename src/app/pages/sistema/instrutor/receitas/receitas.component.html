<app-sistema-layout [usuario]="usuario" tipoUsuario="instrutor">
  <div class="minhas-receitas">
    <div class="minhas-receitas__header">
      <div>
        <h1 class="minhas-receitas__titulo">Minhas receitas</h1>
        <p class="minhas-receitas__subtitulo">
          Controle financeiro, histórico de vendas e solicitações de saque
        </p>
      </div>
      <button class="btn-saque">Solicitar saque</button>
    </div>

    <!-- KPIs de Receita -->
    <div class="receitas__grid-kpis">
      <app-card-kpi *ngFor="let stat of estatisticas()" [estatistica]="stat"></app-card-kpi>
    </div>

    <!-- Gráfico Simulado / Filtros -->
    <div class="receitas__acoes">
      <h2 class="secao-titulo">Histórico de transações</h2>
      <div class="filtros">
        <select class="filtro-select">
          <option>Últimos 30 dias</option>
          <option>Últimos 90 dias</option>
          <option>Ano atual</option>
        </select>
      </div>
    </div>

    <!-- Tabela de Transações -->
    <div class="tabela-container">
      <table class="tabela">
        <thead>
          <tr>
            <th>Data</th>
            <th>ID</th>
            <th>Curso / Aluno</th>
            <th>Valor bruto</th>
            <th>Taxas</th>
            <th>Valor líquido</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let trx of transacoes()">
            <td>
              <span class="data-trx">{{ trx.data }}</span>
            </td>
            <td>
              <span class="id-trx">{{ trx.id }}</span>
            </td>
            <td>
              <div class="venda-info">
                <span class="venda-info__curso">{{ trx.curso }}</span>
                <span class="venda-info__aluno">{{ trx.aluno }}</span>
              </div>
            </td>
            <td>{{ formatarMoeda(trx.valor) }}</td>
            <td>
              <span class="taxa-valor">- {{ formatarMoeda(trx.taxa) }}</span>
            </td>
            <td>
              <span class="liquido-valor">{{ formatarMoeda(trx.liquido) }}</span>
            </td>
            <td>
              <span class="status-badge" [ngClass]="'status-badge--' + trx.status">
                {{ trx.status === 'concluido' ? 'Concluído' : 'Pendente' }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</app-sistema-layout>
