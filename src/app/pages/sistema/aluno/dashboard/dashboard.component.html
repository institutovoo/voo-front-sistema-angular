<app-sistema-layout [usuario]="usuario" tipoUsuario="aluno">
  <!-- Banner de Boas-vindas -->
  <section class="boas-vindas">
    <div class="boas-vindas__texto">
      <h1 class="boas-vindas__titulo">OlÃ¡, {{ nomeAluno }}! ðŸ‘‹</h1>
      <p class="boas-vindas__subtitulo">Continue de onde parou e alcance seus objetivos.</p>
    </div>
  </section>

  <!-- EstatÃ­sticas -->
  <section class="estatisticas">
    <div class="estatisticas__grid">
      <app-card-kpi *ngFor="let stat of estatisticas" [estatistica]="stat"></app-card-kpi>
    </div>
  </section>

  <!-- Grid Principal -->
  <div class="grid-principal">
    <!-- Coluna Principal -->
    <div class="coluna-principal">
      <!-- Continue Aprendendo -->
      <section class="secao">
        <div class="secao__header">
          <h2 class="secao__titulo">Continue aprendendo</h2>
          <a routerLink="/aluno/meus-cursos" class="secao__link">Ver todos â€º</a>
        </div>

        <div class="curso-destaque">
          <div class="curso-destaque__imagem">
            <img [src]="cursoAtual.imagem" [alt]="cursoAtual.titulo" />
            <button class="curso-destaque__play">
              <app-header-icone
                nome="play"
                [tamanho]="24"
                preenchimento="white"
                cor="none"
              ></app-header-icone>
            </button>
          </div>
          <div class="curso-destaque__info">
            <div class="curso-destaque__meta">
              <span
                class="curso-destaque__categoria"
                [style.background-color]="cursoAtual.categoriaColor"
              >
                {{ cursoAtual.categoria }}
              </span>
              <span class="curso-destaque__aula">
                Aula {{ cursoAtual.aulaAtual }} de {{ cursoAtual.totalAulas }}
              </span>
            </div>
            <h3 class="curso-destaque__titulo">{{ cursoAtual.titulo }}</h3>
            <p class="curso-destaque__modulo">{{ cursoAtual.modulo }}</p>
            <div class="curso-destaque__progresso">
              <app-barra-progresso [valor]="cursoAtual.progresso"></app-barra-progresso>
              <div class="curso-destaque__stats">
                <span>{{ cursoAtual.progresso }}% ConcluÃ­do</span>
                <span>Restam {{ cursoAtual.duracao }}</span>
              </div>
            </div>
            <button class="btn-continuar">Continuar Assistindo</button>
          </div>
        </div>
      </section>

      <!-- Meus Cursos -->
      <section class="secao">
        <div class="secao__header">
          <h2 class="secao__titulo">Meus Cursos</h2>
          <a routerLink="/aluno/meus-cursos" class="secao__link">Ver todos</a>
        </div>

        <div class="cursos-grid">
          <app-curso-card
            *ngFor="let curso of meusCursos"
            [curso]="curso"
            (acessar)="onAcessarCurso($event)"
          ></app-curso-card>
        </div>
      </section>
    </div>

    <!-- Coluna Lateral -->
    <aside class="coluna-lateral">
      <!-- Atividade Recente -->
      <section class="secao">
        <div class="secao__header">
          <h2 class="secao__titulo">Atividade Recente</h2>
        </div>
        <div class="card-lateral">
          <div class="atividades">
            <app-atividade-item
              *ngFor="let atividade of atividadesRecentes"
              [atividade]="atividade"
            ></app-atividade-item>
          </div>
        </div>
      </section>

      <!-- Meta Semanal -->
      <section class="secao">
        <div class="secao__header">
          <h2 class="secao__titulo">Meta Semanal</h2>
        </div>
        <div class="card-lateral">
          <div class="meta">
            <div class="meta__circulo">
              <svg viewBox="0 0 100 100" class="meta__svg">
                <circle cx="50" cy="50" r="45" class="meta__fundo" />
                <circle
                  cx="50"
                  cy="50"
                  r="45"
                  class="meta__progresso"
                  [style.stroke-dasharray]="'283'"
                  [style.stroke-dashoffset]="283 - (283 * metaSemanal.porcentagem) / 100"
                />
              </svg>
              <span class="meta__valor">{{ metaSemanal.porcentagem }}%</span>
            </div>
            <p class="meta__texto">
              {{ metaSemanal.horasConcluidas }} de {{ metaSemanal.horasAlvo }} horas concluÃ­das
            </p>
          </div>

          <div class="meta__dias">
            <div
              *ngFor="let dia of diasSemana"
              class="meta__dia"
              [class.meta__dia--atual]="dia.atual"
            >
              <span class="meta__dia-nome">{{ dia.dia }}</span>
              <app-barra-progresso
                [valor]="(dia.horas / 6) * 100"
                tamanho="pequeno"
                class="meta__dia-barra"
              ></app-barra-progresso>
              <span class="meta__dia-horas" [class.meta__dia-horas--destaque]="dia.atual">
                {{ dia.horas }}h
              </span>
            </div>
          </div>
        </div>
      </section>
    </aside>
  </div>
</app-sistema-layout>
